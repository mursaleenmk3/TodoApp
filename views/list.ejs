<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>

    <div class="box">
        <h1>Todo list</h1>

        <div class="tasks">

            <% todolist.forEach((items)=>{%>
                <form action="/delete" method="post">
                    <div class="task">
                        <input type="checkbox" class="checkbox" name="checkbox1" value="<%=items._id%>" onchange="this.form.submit()">
                        <p class="todo-item">
                            <%=items.name%>
                        </p>
                        <!-- <ion-icon name="trash-outline"></ion-icon> -->
                    </div>
                </form>
                
                <%})%>


                    <form action="/" method="post">
                        <input type="text" name="ele1" placeholder="Please enter your task" id="formele"
                            style="display: none">
                        <input type="submit" value="+" id="formele1" style="display: none">
                        <div class="addnew" id="addtask">+ New Task </div>
                    </form>
        </div>
    </div>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script>
        const addbtn = document.getElementById("addtask");
        const formele1 = document.getElementById("formele");
        const formele2 = document.getElementById("formele1");

        addbtn.addEventListener('click', () => {
            if (formele1.style.display === 'none' && formele2.style.display === 'none') {
                formele1.style.display = 'inline';
                formele2.style.display = 'inline';
            }
        });
        const checkboxes = document.querySelectorAll('.checkbox');
        const todoItems = document.querySelectorAll('.todo-item');

        checkboxes.forEach((checkbox, index) => {
            checkbox.addEventListener('change', () => {
                if (checkbox.checked) {
                    todoItems[index].classList.add('completed');
                }
            });
        });

    </script>

</body>

</html>